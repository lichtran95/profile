extends layout.pug

//- Setting
block setting
	- var layout = true
	- var dockbar = false
	- var modal = true
	- var swiperjs = true
	- var introjs = true

block head
	include head.pug

block pages
	- bodyC.push("")
	- layoutClasses.push("zMarket-layout")
	- bodyClasses.push("page-content has-grey-background")
	- dockbarClasses.push("dockbar")
	
//- Add Body
block body
	include page/_home.pug

//- Add Footer
block dockbar
	//- include page/dockbar.pug

//- Add Modal
block modal
	include page/modal_banner_home.pug

block javaScripts extend
	script.
		var swiper = new Swiper('.swiper-hero', {
			slidesPerView: 1,
			spaceBetween: 0,
			loop: true,
			autoplay: {
				delay: 3000,
			},
			pagination: {
				el: '#hero-pagination',
			},
		});
		//- $(window).on('load', function () {
		//- 	$("#modal-banner-home").modal("show");
		//- }); 
		//- demo active dockbar
		$(".context-dockbar li a").removeClass("active");
		$(".context-dockbar li:nth-child(1) a").addClass("active");

		//fix search bar old version
		window.onscroll = (value) => {
			let search_bar = document.getElementsByClassName('fix-search-scroll')[0]
			if(value){
				if(document.getElementsByClassName('introjs-showElement').length > 0){

				} else {
						if(window.scrollY <= 70){
							search_bar.classList.remove('is-scroll')
						} else {
							search_bar.classList.add('is-scroll')
						}	
					}
			}
		 }

		//popup filter search
		$('.filter-location').click(()=>{
			$("body").addClass("overlay-open");
			$("#popup-full-filter-new").addClass("is-show");
		})
		$(".open-popup-quanhuyen").click(()=>{
			$("#slide-select-location").addClass("is-show");
		})
		$("#slide-select-location  .select-location").click(function(){
			$("#slide-filter-full").addClass("is-show");
		});
		$("#slide-filter-full  input").click(function(){
			$(".func-close-slide").click();
		});

		$('.filter-price').click(()=>{
			$("body").addClass("overlay-open");
			$("#popup-filter-price").addClass("is-show");
		})

		//- $('.filter-category').click(()=>{
		//- 	$("body").addClass("overlay-open");
		//- 	$("#popup-filter-category").addClass("is-show");
		//- })

		$(".func-close-popup").click(function(){
			setTimeout(()=>{$("body").removeClass("overlay-open");}, 200)
			$(".popup-container").removeClass("is-show");
		});
		$(".func-close-transparent").click(function(){
			$("body").css('overflow','auto');
		});

		$(".input-group").click(function(){
			$(".popup-container").removeClass("is-show");
			$("body").removeClass("overlay-open");
		});

		//new filter category ver2 
		$(".func-open-category").click(function(){
			$("body").addClass("overlay-open");
			$("#popup-filter-category-ver2").addClass("is-show");
		});
		$("#popup-filter-category-ver2 #opt-cate-bds").click(function(){
			$('.group-bds').addClass('show')
			$('.group-bds .final-step').removeClass('show')
			
			$('.group-bds input').prop( "checked", false );

			setTimeout(()=>{
				
				$('.group-bds .is-second').addClass('show')
			},100)
			setTimeout(()=>{$('.group-bds .is-third').css('display', 'block')},200)
		})
		$("#popup-filter-category-ver2 #opt-cate-all").click(function(){
			$('.group-bds').addClass('show')
			$('.group-bds .final-step').removeClass('show')
			
			$('.group-bds input').prop( "checked", false );

			setTimeout(()=>{
				$('.group-bds .is-second').addClass('show')
			},100)
			setTimeout(()=>{$('.group-bds .is-third').css('display', 'block')},200)
		})
		$("#popup-filter-category-ver2 #opt-cate-car").click(function(){
			$('.group-bds').addClass('show')
			$('.group-bds .final-step').removeClass('show')
			//- $('.group-bds .is-third').css('display', 'none')
			$('.group-bds input').prop( "checked", false );

			setTimeout(()=>{$('.group-bds .is-second').addClass('show')},100)
		})
		$("#popup-filter-category-ver2 #opt-bds-1").click(function(){
			//- $('.group-bds .final-step').removeClass('show')
			if($("#opt-cate-bds")[0].checked == true){
				$('.group-bds .is-third').css('display', 'block')
				if(!$('.group-bds .is-third').hasClass('show')){
					setTimeout(()=>{$('.group-bds .is-third').addClass('show')},100)
				}
				
			} else if($("#opt-cate-car")[0].checked == true){
				$('.group-bds .is-third').css('display', 'none')
				if(!$('.group-bds .is-fourth').hasClass('show')){
					setTimeout(()=>{$('.group-bds .is-fourth').addClass('show')},100)
				}
				
			} else {
				setTimeout(()=>{$('.group-bds .blk-radio-choose').addClass('show')},100)
			}
				
		})
		$("#popup-filter-category-ver2 #opt-bds-2").click(function(){
			//- $('.group-bds .final-step').removeClass('show')
			if($("#opt-cate-bds")[0].checked == true){
				$('.group-bds .is-third').css('display', 'block')
				if(!$('.group-bds .is-third').hasClass('show')){
					setTimeout(()=>{$('.group-bds .is-third').addClass('show')},100)
				}
				
			} else if($("#opt-cate-car")[0].checked == true){
				$('.group-bds .is-third').css('display', 'none')
				if(!$('.group-bds .is-fourth').hasClass('show')){
					setTimeout(()=>{$('.group-bds .is-fourth').addClass('show')},100)
				}
				
			} else {
				setTimeout(()=>{$('.group-bds .blk-radio-choose').addClass('show')},100)

			}
		})
		$("#popup-filter-category-ver2 #opt-bds-3").click(function(){
			//- $('.group-bds .final-step').removeClass('show')
			if($("#opt-cate-bds")[0].checked == true){
				$('.group-bds .is-third').css('display', 'block')
				setTimeout(()=>{$('.group-bds .is-third').addClass('show')},100)
			} else if($("#opt-cate-car")[0].checked == true){
				$('.group-bds .is-third').css('display', 'none')
				if(!$('.group-bds .is-fourth').hasClass('show')){
					setTimeout(()=>{$('.group-bds .is-fourth').addClass('show')},100)
				}
				
			} else {
				setTimeout(()=>{$('.group-bds .blk-radio-choose').addClass('show')},100)
			}
		})

		$(".func-new-full-filter").click(()=>{
			$("body").addClass("overlay-open");
			$("#popup-full-filter-new ").addClass("is-show");
		})
		$(".open-popup-quanhuyen").click(()=>{
			$("#slide-select-location").addClass("is-show");
		})


		//introjs
		//- var tour = introJs()
		//- tour.onbeforechange(()=>{
		//- 	$("body").css('overflow','hidden');
		//- }).onbeforeexit(()=>{
		//- 	//- $("body").css('overflow','auto');
		//- 	$("#modal-banner-home").modal("show");
		//- }).start();
		//- $(".introjs-skipbutton").click(function(){
		//- 	$("body").removeClass("is-overflow-hidden");
		//- });
		//- $('.introjs-skipbutton').click(function(){
		//- 	$('html, body').animate({ scrollTop: 0 }, 500);
		//- })
